<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Full-height accordion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/dist/i.js"></script>
    <style>
        html, body {
            padding: 0;
            margin: 0;
            height: 100%;
        }
    </style>
</head>

<body>
    <!-- Using accordion -->
    <i-accordion>
        <header>Section 1</header>
        <section>
            <h3>Text 1</h3>
        </section>
        <header>Section 2</header>
        <section>
            <h3>Text 2</h3>
        </section>
        <header>Section 3</header>
        <section>
            <h3>Text 3</h3>
        </section>
    </i-accordion>
    <!-- Using accordion -->


    <!-- i.js component -->
    <script type=i i-accordion>
        <!template>
            <slot></slot>
        <!class>
            setFirstActive() {
                const children = this.document.querySelector('slot').assignedElements();
                const headers = children.filter(i => i.nodeName === 'HEADER');
                const sections = children.filter(i => i.nodeName === 'SECTION');
                children.forEach(e => e.removeAttribute('active'));
                if(headers.length) headers[0].setAttribute('active', true);
                if(sections.length) sections[0].setAttribute('active', true);
            }

            connected() {
                const click = e => {
                    Array.from(this.children).forEach(e => e.removeAttribute('active'));
                    e.target.setAttribute('active', true);
                    var el = e.target;
                    do el = el.nextSibling;
                    while (el && el.nodeName !== 'SECTION');
                    if(el) el.setAttribute('active', true);
                };

                const attachClickEvent = () => {
                    const children = this.document.querySelector('slot').assignedElements();
                    const headers = children.filter(i => i.nodeName === 'HEADER');
                    headers.forEach(e => e.onclick = click);
                }

                attachClickEvent();
                this.setFirstActive();

                //  Let everithing working after slot content is changed
                this._observer = new MutationObserver(() => {
                    const children = Array.from(this.children);
                    const headers = children.filter(i => i.nodeName === 'HEADER');
                    headers.forEach(e => e.onclick = click);
                    if(!headers.some(e => e.hasAttribute('active'))) {
                        const sections = children.filter(i => i.nodeName === 'SECTION');
                        if(headers.length) headers[0].setAttribute('active', true);
                        if(sections.length) sections[0].setAttribute('active', true);
                    }
                });
                this._observer.observe(this, { childList: true });
            }

            disconnected(){
                this._observer.disconnect();
            }

        <!style>
            :host {
                height: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                width: 100%;
            }

            ::slotted(header) {
                cursor: pointer;
                border-top: 1px solid rgba(0, 0, 0, 0.25);
                background-color: #007bff;
                flex-shrink: 1 !important;
                padding: 0.5em 0.5em;
                font-size: 1em;
                font-weight: 400;
                color: #fff;
            }

            ::slotted(header[active=true]) {
                background: red;
            }

            ::slotted(section[active=true]) {
                flex-grow: 1;
                display: block;
            }

            ::slotted(section) {
                display: none;
                height: 100%;
                overflow-y: auto;
                flex-grow: 0;
                transition: all 0.25s linear;
            }

    </script>



</body>

</html>
